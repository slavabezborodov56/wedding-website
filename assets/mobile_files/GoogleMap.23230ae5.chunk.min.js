(("undefined"!=typeof self?self:this).webpackJsonp_thunderbolt_elements=("undefined"!=typeof self?self:this).webpackJsonp_thunderbolt_elements||[]).push([[169],{1169:function(e,t,n){e.exports=n.p+"b4f9c49a00780b3a8097e7114b529be7.html"},1170:function(e,t,n){e.exports=n.p+"google-map.min.js"},555:function(e,t,n){"use strict";n.r(t);var r=n(177),a=n(643),o=n.n(a),u=n(3),c=n(658),i=n(779);function l(){var e=r.useRef([]);return[r.useCallback((function(){return new Promise((function(t){return e.current.push(t)}))}),[]),r.useCallback((function(t){e.current.forEach((function(e){return e(t)})),e.current.length=0}),[])]}var s=function(e,t){if(e||t)return t?{path:e,fillColor:t,strokeColor:t,fillOpacity:1,scale:.5}:function(e){if(e&&e.endsWith(".webp"))try{var t=e.match(/media\/[^/]+/)[0].split(".")[1];e=e.replace(/.webp$/,"."+t)}catch(e){}return e}(e)},f="load",d="message",p="SET_INITIAL_LOCATIONS",v="SET_CENTER",m="CENTER_UPDATED",g="SET_CENTER_FINISHED",b="SET_ZOOM",E="ZOOM_UPDATED",O="SET_ZOOM_FINISHED",M="MARKER_CLICKED",h="MAP_CLICKED",_="GET_MARKERS",C="MARKERS";function j(e,t,n){var a,o,j=n.onUpdateZoom,y=n.onUpdateCenter,k=n.onMarkerClicked,S=n.onMapClicked,w=l(),L=w[0],N=w[1],R=l(),T=R[0],I=R[1],A=l(),D=A[0],G=A[1],U=Object(r.useState)(!1),Z=U[0],F=U[1],K=Object(r.useMemo)((function(){return function(e){return Object(u.a)(Object(u.a)({},e),{locations:e.locations.map((function(e){return Object(u.a)(Object(u.a)({},e),{icon:s(e.pinIcon,e.pinColor)})}))})}(t)}),[t]),x=Object(i.a)(Z?K:null),J=((a={})[g]=function(){return N()},a[m]=function(e){return null==y?void 0:y(e)},a[O]=function(){return I()},a[E]=function(e){return null==j?void 0:j({zoom:e})},a[M]=function(e){return null==k?void 0:k(Object(u.a)({type:"markerClicked"},e))},a[h]=function(e){var t=e.longitude,n=e.latitude,r=Object(u.e)(e,["longitude","latitude"]);return null==S?void 0:S(Object(u.a)({type:"mapClicked",location:{longitude:t,latitude:n}},r))},a[C]=function(e){return G(e)},a),P=((o={})[f]=function(e){(0,e._sendMessage)({type:p,data:JSON.stringify(K)}),F(!0)},o[d]=function(e){var t,n=e.event;if("string"==typeof n.payload){var r=JSON.parse(n.payload),a=r.type,o=r.data;null===(t=J[a])||void 0===t||t.call(J,o)}},o),H=Object(c.a)({reducer:function(e,t){var n;return null===(n=P[e.type])||void 0===n?void 0:n.call(P,{event:e,_sendMessage:t})}}),W=H[0],B=H[1];return Object(r.useImperativeHandle)(e,(function(){return{setMapCenter:function(e,t){var n=L();return B({type:v,data:JSON.stringify({longitude:e,latitude:t})}),n},setMapZoom:function(e){var t=T();return B({type:b,data:e}),t},getVisibleMarkers:function(){var e=D();return B({type:_}),e}}})),Object(r.useEffect)((function(){if(Z){var e=!!x&&(t=K.locations,n=x.locations,t.length===n.length&&t.every((function(e,t){var r=Object.keys(e);return r.length===Object.keys(n[t]).length&&r.every((function(r){return e[r]===n[t][r]}))})));B(JSON.stringify(Object(u.a)(Object(u.a)({},K),{shouldKeepMarkers:e})))}var t,n}),[K,x,B,Z]),[W]}var y=n(922),k=n.n(y),S={GoogleMapLiftedShadow:function(){return r.createElement(r.Fragment,null,r.createElement("div",{className:o()(k.a.left,k.a.shd)}),r.createElement("div",{className:o()(k.a.right,k.a.shd)}))},GoogleMapSloppy:function(){return r.createElement(r.Fragment,null,r.createElement("div",{className:o()(k.a.brd,k.a.one)}),r.createElement("div",{className:o()(k.a.brd,k.a.two)}))},GoogleMapSkin:function(){return r.createElement(r.Fragment,null)},GoogleMapDefault:function(){return r.createElement(r.Fragment,null)}},w=n(1169),L=n.n(w),N=n(1170),R=n.n(N);t.default=r.forwardRef((function(e,t){var n=e.id,a=e.skin,u=e.urlQueries,c=e.mapData,i=e.translate,l=e.onUpdateCenter,s=e.onUpdateZoom,f=e.onMarkerClicked,d=e.onMapClicked,p=e.onMouseEnter,v=e.onMouseLeave,m=S[a],g=L.a+"?"+u+"&"+new URLSearchParams({googleMapsScriptUrl:R.a}),b=r.useState(!1),E=b[0],O=b[1],M=j(t,c,{onUpdateCenter:l,onUpdateZoom:s,onMarkerClicked:f,onMapClicked:d})[0];r.useEffect((function(){O(!0)}),[g]);var h=i("component_label","COMPONENT_LABEL_googleMapsTitle","Google Map");return r.createElement("div",{id:n,tabIndex:0,className:o()(k.a[a],k.a.wixIframe)},E&&r.createElement("wix-iframe",{title:h,"aria-label":h,"data-src":g},r.createElement(m,null),r.createElement("div",{id:"mapContainer_"+n,onMouseEnter:p,onMouseLeave:v,className:k.a.mapContainer},r.createElement("iframe",{ref:M,title:h,"aria-label":h,"data-src":g,width:"100%",height:"100%",frameBorder:"0",scrolling:"no",allowFullScreen:!0}))))}))},658:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(177),a=n(644);function o(e){var t=e.reducer,n=void 0===t?function(){return{}}:t,o=e.iframeLoaded,u=Object(r.useRef)([]),c=Object(r.useRef)(void 0),i=Object(r.useRef)(void 0),l=Object(r.useRef)(void 0),s=Object(r.useCallback)((function(e){if(c.current&&o){var t=c.current.contentWindow;null==t||t.postMessage(e,"*")}else if(c.current&&i.current){var n=c.current.contentWindow;null==n||n.postMessage(e,"*")}else u.current.push(e)}),[o]),f=Object(r.useCallback)((function(){0!==u.current.length&&(u.current.forEach(s),u.current=[])}),[s]),d=Object(r.useCallback)((function(e){if(l.current&&(l.current(),l.current=void 0),e){var t=function(){i.current=!0,f(),n({type:"load"},s)};e.addEventListener("load",t),c.current=e,l.current=function(){e.removeEventListener("load",t)}}}),[n,s,f]);return Object(r.useEffect)((function(){o&&f()}),[o,f]),Object(r.useEffect)((function(){if(Object(a.b)()){var e=function(e){var t;e.source&&e.source!==(null===(t=c.current)||void 0===t?void 0:t.contentWindow)||n({type:"message",payload:e.data},s)};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}}),[n,s]),[d,s]}},779:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(177);function a(e,t){void 0===t&&(t=null);var n=Object(r.useRef)(t);return Object(r.useEffect)((function(){n.current=e}),[e]),n.current}},922:function(e,t,n){e.exports={GoogleMapSkin:"_1LodC",googleMapSkin:"_1LodC",mapContainer:"_3HA2p",GoogleMapDefault:"_2C90e",googleMapDefault:"_2C90e",GoogleMapSloppy:"_2thyl",googleMapSloppy:"_2thyl",brd:"_5hmKa",one:"_3amD6",two:"_3pVOf",GoogleMapLiftedShadow:"ugbAt",googleMapLiftedShadow:"ugbAt",shd:"_2LZih",left:"_2nA3_",right:"_29t6M"}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/editor-elements/dist/GoogleMap.23230ae5.chunk.min.js.map